!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/compiler")):"function"==typeof define&&define.amd?define("@angular/core/testing",["exports","@angular/core","@angular/compiler"],t):t(((e=e||self).ng=e.ng||{},e.ng.core=e.ng.core||{},e.ng.core.testing={}),e.ng.core,e.ng.compiler)}(this,function(e,d,o){"use strict";function t(e){var t="undefined"!=typeof Zone?Zone:null;if(!t)return function(){return Promise.reject("Zone is needed for the waitForAsync() test helper but could not be found. Please make sure that your environment includes zone.js")};t=t&&t[t.__symbol__("asyncTest")];return"function"==typeof t?t(e):function(){return Promise.reject("zone-testing.js is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/testing")}}var u=(r.prototype._tick=function(e){this.changeDetectorRef.detectChanges(),e&&this.checkNoChanges()},r.prototype.detectChanges=function(e){var t=this;void 0===e&&(e=!0),null!=this.ngZone?this.ngZone.run(function(){t._tick(e)}):this._tick(e)},r.prototype.checkNoChanges=function(){this.changeDetectorRef.checkNoChanges()},r.prototype.autoDetectChanges=function(e){if(void 0===e&&(e=!0),null==this.ngZone)throw new Error("Cannot call autoDetectChanges when ComponentFixtureNoNgZone is set");this._autoDetect=e,this.detectChanges()},r.prototype.isStable=function(){return this._isStable&&!this.ngZone.hasPendingMacrotasks},r.prototype.whenStable=function(){var t=this;return this.isStable()?Promise.resolve(!1):(null!==this._promise||(this._promise=new Promise(function(e){t._resolve=e})),this._promise)},r.prototype._getRenderer=function(){return void 0===this._renderer&&(this._renderer=this.componentRef.injector.get(d.RendererFactory2,null)),this._renderer},r.prototype.whenRenderingDone=function(){var e=this._getRenderer();return e&&e.whenRenderingDone?e.whenRenderingDone():this.whenStable()},r.prototype.destroy=function(){this._isDestroyed||(this.componentRef.destroy(),null!=this._onUnstableSubscription&&(this._onUnstableSubscription.unsubscribe(),this._onUnstableSubscription=null),null!=this._onStableSubscription&&(this._onStableSubscription.unsubscribe(),this._onStableSubscription=null),null!=this._onMicrotaskEmptySubscription&&(this._onMicrotaskEmptySubscription.unsubscribe(),this._onMicrotaskEmptySubscription=null),null!=this._onErrorSubscription&&(this._onErrorSubscription.unsubscribe(),this._onErrorSubscription=null),this._isDestroyed=!0)},r);function r(e,t,r){var o=this;this.componentRef=e,this.ngZone=t,this._autoDetect=r,this._isStable=!0,this._isDestroyed=!1,this._resolve=null,this._promise=null,this._onUnstableSubscription=null,this._onStableSubscription=null,this._onMicrotaskEmptySubscription=null,this._onErrorSubscription=null,this.changeDetectorRef=e.changeDetectorRef,this.elementRef=e.location,this.debugElement=d.getDebugNode(this.elementRef.nativeElement),this.componentInstance=e.instance,this.nativeElement=this.elementRef.nativeElement,this.componentRef=e,(this.ngZone=t)&&t.runOutsideAngular(function(){o._onUnstableSubscription=t.onUnstable.subscribe({next:function(){o._isStable=!1}}),o._onMicrotaskEmptySubscription=t.onMicrotaskEmpty.subscribe({next:function(){o._autoDetect&&o.detectChanges(!0)}}),o._onStableSubscription=t.onStable.subscribe({next:function(){o._isStable=!0,null!==o._promise&&Zone.current.scheduleMicroTask("scheduleMicrotask",function(){t.hasPendingMacrotasks||null!==o._promise&&(o._resolve(!0),o._resolve=null,o._promise=null)})}}),o._onErrorSubscription=t.onError.subscribe({next:function(e){throw e}})})}var n="undefined"!=typeof Zone?Zone:null,i=n&&n[n.__symbol__("fakeAsyncTest")],s="zone-testing.js is needed for the fakeAsync() test helper but could not be found.\n        Please make sure that your environment includes zone.js/testing";function l(){if(i)return i.resetFakeAsyncZone();throw new Error(s)}var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function p(e,s,u,l){return new(u=u||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(o,n)}i((l=l.apply(e,s||[])).next())})}function h(r,o){var n,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(r,u)}catch(e){t=[6,e],i=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}Object.create;function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function m(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||t)}Object.create;function y(o){var r=[],n=new Map;function l(e){var t,r=n.get(e);return r||(t=o(e),n.set(e,r=t.then(T))),r}return g.forEach(function(o,e){var n=[];o.templateUrl&&n.push(l(o.templateUrl).then(function(e){o.template=e}));var i=o.styleUrls,s=o.styles||(o.styles=[]),u=o.styles.length;i&&i.forEach(function(t,r){s.push(""),n.push(l(t).then(function(e){s[u+r]=e,i.splice(i.indexOf(t),1),0==i.length&&(o.styleUrls=void 0)}))});var t=Promise.all(n).then(function(){_.delete(e)});r.push(t)}),w(),Promise.all(r).then(function(){})}var g=new Map,_=new Set;function M(e){return _.has(e)}function w(){var e=g;return g=new Map,e}function T(e){return"string"==typeof e?e:e.text()}var O=0,E=(b.prototype.overrideMetadata=function(e,t,r){var o={};if(t&&!function(e){var r=[];Object.keys(e).forEach(function(e){e.startsWith("_")||r.push(e)});var o=e;for(;o=Object.getPrototypeOf(o);)Object.keys(o).forEach(function(e){var t=Object.getOwnPropertyDescriptor(o,e);!e.startsWith("_")&&t&&"get"in t&&r.push(e)});return r}(t).forEach(function(e){return o[e]=t[e]}),r.set){if(r.remove||r.add)throw new Error("Cannot set and add/remove "+d.ɵstringify(e)+" at the same time!");!function(e,t){for(var r in t)e[r]=t[r]}(o,r.set)}return r.remove&&function(r,o,n){var i=new Set;for(var e in o)!function(t){var e=o[t];Array.isArray(e)?e.forEach(function(e){i.add(C(t,e,n))}):i.add(C(t,e,n))}(e);for(e in r)!function(t){var e=r[t];Array.isArray(e)?r[t]=e.filter(function(e){return!i.has(C(t,e,n))}):i.has(C(t,e,n))&&(r[t]=void 0)}(e)}(o,r.remove,this._references),r.add&&function(e,t){for(var r in t){var o=t[r],n=e[r];null!=n&&Array.isArray(n)?e[r]=n.concat(o):e[r]=o}}(o,r.add),new e(o)},b);function b(){this._references=new Map}function C(e,t,r){return e+":"+JSON.stringify(t,function(e,t){return t="function"==typeof t?function(e,t){var r=t.get(e);r||(r=""+d.ɵstringify(e)+O++,t.set(e,r));return r}(t,r):t})}var D=new d.ɵReflectionCapabilities,P=(S.prototype.addOverride=function(e,t){var r=this.overrides.get(e)||[];r.push(t),this.overrides.set(e,r),this.resolved.delete(e)},S.prototype.setOverrides=function(e){var r=this;this.overrides.clear(),e.forEach(function(e){var t=v(e,2),e=t[0],t=t[1];r.addOverride(e,t)})},S.prototype.getAnnotation=function(e){for(var t=D.annotations(e),r=t.length-1;0<=r;r--){var o=t[r];if(o instanceof d.Directive||o instanceof d.Component||o instanceof d.Pipe||o instanceof d.NgModule)return o instanceof this.type?o:null}return null},S.prototype.resolve=function(e){var t,r,o=this,n=this.resolved.get(e)||null;return n||(!(n=this.getAnnotation(e))||(t=this.overrides.get(e))&&(r=new E,t.forEach(function(e){n=r.overrideMetadata(o.type,n,e)})),this.resolved.set(e,n)),n},S);function S(){this.overrides=new Map,this.resolved=new Map}var N,F=(c(R,N=P),Object.defineProperty(R.prototype,"type",{get:function(){return d.Directive},enumerable:!1,configurable:!0}),R);function R(){return null!==N&&N.apply(this,arguments)||this}var j,A=(c(I,j=P),Object.defineProperty(I.prototype,"type",{get:function(){return d.Component},enumerable:!1,configurable:!0}),I);function I(){return null!==j&&j.apply(this,arguments)||this}var k,x=(c(U,k=P),Object.defineProperty(U.prototype,"type",{get:function(){return d.Pipe},enumerable:!1,configurable:!0}),U);function U(){return null!==k&&k.apply(this,arguments)||this}var B,G,L=(c(Z,B=P),Object.defineProperty(Z.prototype,"type",{get:function(){return d.NgModule},enumerable:!1,configurable:!0}),Z);function Z(){return null!==B&&B.apply(this,arguments)||this}(n=G=G||{})[n.DECLARATION=0]="DECLARATION",n[n.OVERRIDE_TEMPLATE=1]="OVERRIDE_TEMPLATE";var V=(z.prototype.setCompilerProviders=function(e){this.compilerProviders=e,this._injector=null},z.prototype.configureTestingModule=function(e){var t,r;void 0!==e.declarations&&(this.queueTypeArray(e.declarations,G.DECLARATION),(t=this.declarations).push.apply(t,m([],v(e.declarations)))),void 0!==e.imports&&(this.queueTypesFromModulesArray(e.imports),(t=this.imports).push.apply(t,m([],v(e.imports)))),void 0!==e.providers&&(r=this.providers).push.apply(r,m([],v(e.providers))),void 0!==e.schemas&&(r=this.schemas).push.apply(r,m([],v(e.schemas)))},z.prototype.overrideModule=function(e,t){this.overriddenModules.add(e),this.resolvers.module.addOverride(e,t);t=this.resolvers.module.resolve(e);if(null===t)throw K(e.name,"NgModule");this.recompileNgModule(e,t),this.queueTypesFromModulesArray([e])},z.prototype.overrideComponent=function(e,t){this.resolvers.component.addOverride(e,t),this.pendingComponents.add(e)},z.prototype.overrideDirective=function(e,t){this.resolvers.directive.addOverride(e,t),this.pendingDirectives.add(e)},z.prototype.overridePipe=function(e,t){this.resolvers.pipe.addOverride(e,t),this.pendingPipes.add(e)},z.prototype.overrideProvider=function(e,t){var r=void 0!==t.useFactory?{provide:e,useFactory:t.useFactory,deps:t.deps||[],multi:t.multi}:void 0!==t.useValue?{provide:e,useValue:t.useValue,multi:t.multi}:{provide:e},o="string"!=typeof e?d.ɵgetInjectableDef(e):null,t=null===o?null:d.resolveForwardRef(o.providedIn);("root"===t?this.rootProviderOverrides:this.providerOverrides).push(r),this.providerOverridesByToken.set(e,r),null!==o&&null!==t&&"string"!=typeof t&&(void 0!==(o=this.providerOverridesByModule.get(t))?o.push(r):this.providerOverridesByModule.set(t,[r]))},z.prototype.overrideTemplateUsingTestingModule=function(e,t){var r,o=this,n=e[d.ɵNG_COMP_DEF],i=!!n&&!M(e)&&(!!(r=o.resolvers.component.resolve(e)).styleUrls&&0<r.styleUrls.length);this.overrideComponent(e,{set:i?{template:t,styles:[],styleUrls:[]}:{template:t}}),i&&n.styles&&0<n.styles.length&&this.existingComponentStyles.set(e,n.styles),this.componentToModuleScope.set(e,G.OVERRIDE_TEMPLATE)},z.prototype.compileComponents=function(){return p(this,void 0,void 0,function(){var t,r=this;return h(this,function(e){switch(e.label){case 0:return(this.clearComponentResolutionQueue(),this.compileTypesSync())?[4,y(function(e){return t=t||r.injector.get(o.ResourceLoader),Promise.resolve(t.get(e))})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},z.prototype.finalize=function(){this.compileTypesSync(),this.compileTestModule(),this.applyTransitiveScopes(),this.applyProviderOverrides(),this.patchComponentsWithExistingStyles(),this.componentToModuleScope.clear();var e=this.platform.injector;this.testModuleRef=new d.ɵRender3NgModuleRef(this.testModuleType,e),this.testModuleRef.injector.get(d.ApplicationInitStatus).runInitializers();e=this.testModuleRef.injector.get(d.LOCALE_ID,d.ɵDEFAULT_LOCALE_ID);return d.ɵsetLocaleId(e),this.testModuleRef},z.prototype._compileNgModuleSync=function(e){this.queueTypesFromModulesArray([e]),this.compileTypesSync(),this.applyProviderOverrides(),this.applyProviderOverridesToModule(e),this.applyTransitiveScopes()},z.prototype._compileNgModuleAsync=function(t){return p(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this.queueTypesFromModulesArray([t]),[4,this.compileComponents()];case 1:return e.sent(),this.applyProviderOverrides(),this.applyProviderOverridesToModule(t),this.applyTransitiveScopes(),[2]}})})},z.prototype._getModuleResolver=function(){return this.resolvers.module},z.prototype._getComponentFactories=function(e){var r=this;return q(e.ɵmod.declarations).reduce(function(e,t){t=t.ɵcmp;return t&&e.push(new d.ɵRender3ComponentFactory(t,r.testModuleRef)),e},[])},z.prototype.compileTypesSync=function(){var r=this,o=!1;return this.pendingComponents.forEach(function(e){o=o||M(e);var t=r.resolvers.component.resolve(e);if(null===t)throw K(e.name,"Component");r.maybeStoreNgDef(d.ɵNG_COMP_DEF,e),d.ɵcompileComponent(e,t)}),this.pendingComponents.clear(),this.pendingDirectives.forEach(function(e){var t=r.resolvers.directive.resolve(e);if(null===t)throw K(e.name,"Directive");r.maybeStoreNgDef(d.ɵNG_DIR_DEF,e),d.ɵcompileDirective(e,t)}),this.pendingDirectives.clear(),this.pendingPipes.forEach(function(e){var t=r.resolvers.pipe.resolve(e);if(null===t)throw K(e.name,"Pipe");r.maybeStoreNgDef(d.ɵNG_PIPE_DEF,e),d.ɵcompilePipe(e,t)}),this.pendingPipes.clear(),o},z.prototype.applyTransitiveScopes=function(){var e,r=this;0<this.overriddenModules.size&&(e=this.testModuleType[d.ɵNG_MOD_DEF],0<(e=this.collectModulesAffectedByOverrides(e.imports)).size&&e.forEach(function(e){r.storeFieldOfDefOnType(e,d.ɵNG_MOD_DEF,"transitiveCompileScopes"),e[d.ɵNG_MOD_DEF].transitiveCompileScopes=null}));function o(e){var t;return n.has(e)||(t=(t=e)===G.DECLARATION||t===G.OVERRIDE_TEMPLATE?r.testModuleType:e,n.set(e,d.ɵtransitiveScopesFor(t))),n.get(e)}var n=new Map;this.componentToModuleScope.forEach(function(e,t){e=o(e);r.storeFieldOfDefOnType(t,d.ɵNG_COMP_DEF,"directiveDefs"),r.storeFieldOfDefOnType(t,d.ɵNG_COMP_DEF,"pipeDefs"),r.storeFieldOfDefOnType(t,d.ɵNG_COMP_DEF,"tView"),d.ɵpatchComponentDefWithScope(t.ɵcmp,e)}),this.componentToModuleScope.clear()},z.prototype.applyProviderOverrides=function(){function e(r){return function(e){var t=(r===d.ɵNG_COMP_DEF?o.resolvers.component:o.resolvers.directive).resolve(e);o.hasProviderOverrides(t.providers)&&o.patchDefWithProviderOverrides(e,r)}}var o=this;this.seenComponents.forEach(e(d.ɵNG_COMP_DEF)),this.seenDirectives.forEach(e(d.ɵNG_DIR_DEF)),this.seenComponents.clear(),this.seenDirectives.clear()},z.prototype.applyProviderOverridesToModule=function(e){var t,r,o,n;if(!this.moduleProvidersOverridden.has(e)){this.moduleProvidersOverridden.add(e);var i=e[d.ɵNG_INJ_DEF];if(0<this.providerOverridesByToken.size){var s=m(m([],v(i.providers)),v(this.providerOverridesByModule.get(e)||[]));this.hasProviderOverrides(s)&&(this.maybeStoreNgDef(d.ɵNG_INJ_DEF,e),this.storeFieldOfDefOnType(e,d.ɵNG_INJ_DEF,"providers"),i.providers=this.getOverriddenProviders(s));e=q(e[d.ɵNG_MOD_DEF].imports);try{for(var u=f(e),l=u.next();!l.done;l=u.next()){var a=l.value;this.applyProviderOverridesToModule(a)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var c=f(Q(i.imports)),p=c.next();!p.done;p=c.next())H(a=p.value)&&(this.defCleanupOps.push({object:a,fieldName:"providers",originalValue:a.providers}),a.providers=this.getOverriddenProviders(a.providers))}catch(e){o={error:e}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}}}},z.prototype.patchComponentsWithExistingStyles=function(){this.existingComponentStyles.forEach(function(e,t){return t[d.ɵNG_COMP_DEF].styles=e}),this.existingComponentStyles.clear()},z.prototype.queueTypeArray=function(e,t){var r,o;try{for(var n=f(e),i=n.next();!i.done;i=n.next()){var s=i.value;Array.isArray(s)?this.queueTypeArray(s,t):this.queueType(s,t)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}},z.prototype.recompileNgModule=function(e,t){this.maybeStoreNgDef(d.ɵNG_MOD_DEF,e),this.maybeStoreNgDef(d.ɵNG_INJ_DEF,e),d.ɵcompileNgModuleDefs(e,t)},z.prototype.queueType=function(e,t){return this.resolvers.component.resolve(e)?(!M(e)&&e.hasOwnProperty(d.ɵNG_COMP_DEF)||this.pendingComponents.add(e),this.seenComponents.add(e),void(this.componentToModuleScope.has(e)&&this.componentToModuleScope.get(e)!==G.DECLARATION||this.componentToModuleScope.set(e,t))):this.resolvers.directive.resolve(e)?(e.hasOwnProperty(d.ɵNG_DIR_DEF)||this.pendingDirectives.add(e),void this.seenDirectives.add(e)):void(this.resolvers.pipe.resolve(e)&&!e.hasOwnProperty(d.ɵNG_PIPE_DEF)&&this.pendingPipes.add(e))},z.prototype.queueTypesFromModulesArray=function(e){var u=this,l=new Set,a=function(e){var t,r;try{for(var o=f(e),n=o.next();!n.done;n=o.next()){var i,s=n.value;Array.isArray(s)?a(s):W(s)?(i=s.ɵmod,l.has(i)||(l.add(i),u.queueTypeArray(q(i.declarations),s),a(q(i.imports)),a(q(i.exports)))):H(s)&&a([s.ngModule])}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}};a(e)},z.prototype.collectModulesAffectedByOverrides=function(e){var l=this,a=new Set,c=new Set,p=function(e,t){var r,o;try{for(var n=f(e),i=n.next();!i.done;i=n.next()){var s,u=i.value;Array.isArray(u)?p(u,t):W(u)&&(a.has(u)?c.has(u)&&t.forEach(function(e){return c.add(e)}):(a.add(u),l.overriddenModules.has(u)&&t.forEach(function(e){return c.add(e)}),s=u[d.ɵNG_MOD_DEF],p(q(s.imports),t.concat(u))))}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}};return p(e,[]),c},z.prototype.maybeStoreNgDef=function(e,t){var r;this.initialNgDefs.has(t)||(r=Object.getOwnPropertyDescriptor(t,e),this.initialNgDefs.set(t,[e,r]))},z.prototype.storeFieldOfDefOnType=function(e,t,r){e=e[t],t=e[r];this.defCleanupOps.push({object:e,fieldName:r,originalValue:t})},z.prototype.clearComponentResolutionQueue=function(){var r=this;null===this.originalComponentResolutionQueue&&(this.originalComponentResolutionQueue=new Map),w().forEach(function(e,t){return r.originalComponentResolutionQueue.set(t,e)})},z.prototype.restoreComponentResolutionQueue=function(){var e;null!==this.originalComponentResolutionQueue&&(e=this.originalComponentResolutionQueue,_.clear(),e.forEach(function(e,t){return _.add(t)}),g=e,this.originalComponentResolutionQueue=null)},z.prototype.restoreOriginalState=function(){Y(this.defCleanupOps,function(e){e.object[e.fieldName]=e.originalValue}),this.initialNgDefs.forEach(function(e,t){var r=v(e,2),e=r[0],r=r[1];r?Object.defineProperty(t,e,r):delete t[e]}),this.initialNgDefs.clear(),this.moduleProvidersOverridden.clear(),this.restoreComponentResolutionQueue(),d.ɵsetLocaleId(d.ɵDEFAULT_LOCALE_ID)},z.prototype.compileTestModule=function(){var e=this,t=function(){};d.ɵcompileNgModuleDefs(t,{providers:m([],v(this.rootProviderOverrides))});var r=new d.NgZone({enableLongStackTrace:!0}),r=m(m([{provide:d.NgZone,useValue:r},{provide:d.Compiler,useFactory:function(){return new X(e)}}],v(this.providers)),v(this.providerOverrides)),t=[t,this.additionalModuleTypes,this.imports||[]];d.ɵcompileNgModuleDefs(this.testModuleType,{declarations:this.declarations,imports:t,schemas:this.schemas,providers:r},!0),this.applyProviderOverridesToModule(this.testModuleType)},Object.defineProperty(z.prototype,"injector",{get:function(){if(null!==this._injector)return this._injector;var t=[];this.platform.injector.get(d.COMPILER_OPTIONS).forEach(function(e){e.providers&&t.push(e.providers)}),null!==this.compilerProviders&&t.push.apply(t,m([],v(this.compilerProviders)));var e=function(){};d.ɵcompileNgModuleDefs(e,{providers:t});e=new d.ɵNgModuleFactory(e);return this._injector=e.create(this.platform.injector).injector,this._injector},enumerable:!1,configurable:!0}),z.prototype.getSingleProviderOverrides=function(e){e=J(e);return this.providerOverridesByToken.get(e)||null},z.prototype.getProviderOverrides=function(e){var t=this;return e&&e.length&&0!==this.providerOverridesByToken.size?Q(Q(e,function(e){return t.getSingleProviderOverrides(e)||[]})):[]},z.prototype.getOverriddenProviders=function(e){var r=this;if(!e||!e.length||0===this.providerOverridesByToken.size)return[];var t=Q(e),e=this.getProviderOverrides(t),e=m(m([],v(t)),v(e)),o=[],n=new Set;return Y(e,function(e){var t=J(e);r.providerOverridesByToken.has(t)?n.has(t)||(n.add(t),o.unshift(Object.assign(Object.assign({},e),{multi:!1}))):o.unshift(e)}),o},z.prototype.hasProviderOverrides=function(e){return 0<this.getProviderOverrides(e).length},z.prototype.patchDefWithProviderOverrides=function(e,t){var r,o,n=this,i=e[t];i&&i.providersResolver&&(this.maybeStoreNgDef(t,e),r=i.providersResolver,o=function(e){return n.getOverriddenProviders(e)},this.storeFieldOfDefOnType(e,t,"providersResolver"),i.providersResolver=function(e){return r(e,o)})},z);function z(e,t){this.platform=e,this.additionalModuleTypes=t,this.originalComponentResolutionQueue=null,this.declarations=[],this.imports=[],this.providers=[],this.schemas=[],this.pendingComponents=new Set,this.pendingDirectives=new Set,this.pendingPipes=new Set,this.seenComponents=new Set,this.seenDirectives=new Set,this.overriddenModules=new Set,this.existingComponentStyles=new Map,this.resolvers={module:new L,component:new A,directive:new F,pipe:new x},this.componentToModuleScope=new Map,this.initialNgDefs=new Map,this.defCleanupOps=[],this._injector=null,this.compilerProviders=null,this.providerOverrides=[],this.rootProviderOverrides=[],this.providerOverridesByModule=new Map,this.providerOverridesByToken=new Map,this.moduleProvidersOverridden=new Set,this.testModuleRef=null,this.testModuleType=function(){}}function W(e){return e.hasOwnProperty("ɵmod")}function q(e){return e instanceof Function?e():e}function Q(e,t){var r=[];return e.forEach(function(e){Array.isArray(e)?r.push.apply(r,m([],v(Q(e,t)))):r.push(t?t(e):e)}),r}function J(e){return r="provide",(t=e)&&"object"==typeof t&&t[r]||e;var t,r}function H(e){return e.hasOwnProperty("ngModule")}function Y(e,t){for(var r=e.length-1;0<=r;r--)t(e[r],r)}function K(e,t){return new Error(e+" class doesn't have @"+t+" decorator or is missing metadata.")}var X=($.prototype.compileModuleSync=function(e){return this.testBed._compileNgModuleSync(e),new d.ɵNgModuleFactory(e)},$.prototype.compileModuleAsync=function(t){return p(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.testBed._compileNgModuleAsync(t)];case 1:return e.sent(),[2,new d.ɵNgModuleFactory(t)]}})})},$.prototype.compileModuleAndAllComponentsSync=function(e){var t=this.compileModuleSync(e),e=this.testBed._getComponentFactories(e);return new d.ModuleWithComponentFactories(t,e)},$.prototype.compileModuleAndAllComponentsAsync=function(o){return p(this,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return[4,this.compileModuleAsync(o)];case 1:return t=e.sent(),r=this.testBed._getComponentFactories(o),[2,new d.ModuleWithComponentFactories(t,r)]}})})},$.prototype.clearCache=function(){},$.prototype.clearCacheFor=function(e){},$.prototype.getModuleId=function(e){e=this.testBed._getModuleResolver().resolve(e);return e&&e.id||void 0},$);function $(e){this.testBed=e}var ee=(te.prototype.insertRootElement=function(e){},te.prototype.removeAllRootElements=function(){},te);function te(){}var re,oe=new d.InjectionToken("ComponentFixtureAutoDetect"),ne=new d.InjectionToken("ComponentFixtureNoNgZone"),ie=0,se=(ue.initTestEnvironment=function(e,t,r){var o=le();return o.initTestEnvironment(e,t,r),o},ue.resetTestEnvironment=function(){le().resetTestEnvironment()},ue.configureCompiler=function(e){return le().configureCompiler(e),ue},ue.configureTestingModule=function(e){return le().configureTestingModule(e),ue},ue.compileComponents=function(){return le().compileComponents()},ue.overrideModule=function(e,t){return le().overrideModule(e,t),ue},ue.overrideComponent=function(e,t){return le().overrideComponent(e,t),ue},ue.overrideDirective=function(e,t){return le().overrideDirective(e,t),ue},ue.overridePipe=function(e,t){return le().overridePipe(e,t),ue},ue.overrideTemplate=function(e,t){return le().overrideComponent(e,{set:{template:t,templateUrl:null}}),ue},ue.overrideTemplateUsingTestingModule=function(e,t){return le().overrideTemplateUsingTestingModule(e,t),ue},ue.overrideProvider=function(e,t){return le().overrideProvider(e,t),ue},ue.inject=function(e,t,r){return le().inject(e,t,r)},ue.get=function(e,t,r){return void 0===t&&(t=d.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=d.InjectFlags.Default),le().inject(e,t,r)},ue.createComponent=function(e){return le().createComponent(e)},ue.resetTestingModule=function(){return le().resetTestingModule(),ue},ue.shouldTearDownTestingModule=function(){return le().shouldTearDownTestingModule()},ue.tearDownTestingModule=function(){le().tearDownTestingModule()},ue.prototype.initTestEnvironment=function(e,t,r){if(this.platform||this.ngModule)throw new Error("Cannot set base providers because it has already been called");ue._environmentTeardownOptions="function"==typeof r||null==r?void 0:r.teardown,this.platform=t,this.ngModule=e,this._compiler=new V(this.platform,this.ngModule)},ue.prototype.resetTestEnvironment=function(){this.resetTestingModule(),this._compiler=null,this.platform=null,this.ngModule=null,ue._environmentTeardownOptions=void 0},ue.prototype.resetTestingModule=function(){this.checkGlobalCompilationFinished(),d.ɵresetCompiledComponents(),null!==this._compiler&&this.compiler.restoreOriginalState(),this._compiler=new V(this.platform,this.ngModule);try{this.destroyActiveFixtures()}finally{try{this.shouldTearDownTestingModule()&&this.tearDownTestingModule()}finally{this._testModuleRef=null,this._instanceTeardownOptions=void 0}}},ue.prototype.configureCompiler=function(e){if(null!=e.useJit)throw new Error("the Render3 compiler JiT mode is not configurable !");void 0!==e.providers&&this.compiler.setCompilerProviders(e.providers)},ue.prototype.configureTestingModule=function(e){this.assertNotInstantiated("R3TestBed.configureTestingModule","configure the test module"),this._instanceTeardownOptions=e.teardown,this.compiler.configureTestingModule(e)},ue.prototype.compileComponents=function(){return this.compiler.compileComponents()},ue.prototype.inject=function(e,t,r){if(e===ue)return this;var o={},n=this.testModuleRef.injector.get(e,o,r);return n===o?this.compiler.injector.get(e,t,r):n},ue.prototype.get=function(e,t,r){return void 0===t&&(t=d.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=d.InjectFlags.Default),this.inject(e,t,r)},ue.prototype.execute=function(e,t,r){var o=this,e=e.map(function(e){return o.inject(e)});return t.apply(r,e)},ue.prototype.overrideModule=function(e,t){this.assertNotInstantiated("overrideModule","override module metadata"),this.compiler.overrideModule(e,t)},ue.prototype.overrideComponent=function(e,t){this.assertNotInstantiated("overrideComponent","override component metadata"),this.compiler.overrideComponent(e,t)},ue.prototype.overrideTemplateUsingTestingModule=function(e,t){this.assertNotInstantiated("R3TestBed.overrideTemplateUsingTestingModule","Cannot override template when the test module has already been instantiated"),this.compiler.overrideTemplateUsingTestingModule(e,t)},ue.prototype.overrideDirective=function(e,t){this.assertNotInstantiated("overrideDirective","override directive metadata"),this.compiler.overrideDirective(e,t)},ue.prototype.overridePipe=function(e,t){this.assertNotInstantiated("overridePipe","override pipe metadata"),this.compiler.overridePipe(e,t)},ue.prototype.overrideProvider=function(e,t){this.assertNotInstantiated("overrideProvider","override provider"),this.compiler.overrideProvider(e,t)},ue.prototype.createComponent=function(e){var t=this,r=this.inject(ee),o="root"+ie++;r.insertRootElement(o);r=e.ɵcmp;if(!r)throw new Error("It looks like '"+d.ɵstringify(e)+"' has not been IVY compiled - it has no 'ɵcmp' field");var e=this.inject(ne,!1),n=this.inject(oe,!1),i=e?null:this.inject(d.NgZone,null),s=new d.ɵRender3ComponentFactory(r),r=function(){var e=s.create(d.Injector.NULL,[],"#"+o,t.testModuleRef);return new u(e,i,n)},r=i?i.run(r):r();return this._activeFixtures.push(r),r},Object.defineProperty(ue.prototype,"compiler",{get:function(){if(null===this._compiler)throw new Error("Need to call TestBed.initTestEnvironment() first");return this._compiler},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"testModuleRef",{get:function(){return null===this._testModuleRef&&(this._testModuleRef=this.compiler.finalize()),this._testModuleRef},enumerable:!1,configurable:!0}),ue.prototype.assertNotInstantiated=function(e,t){if(null!==this._testModuleRef)throw new Error("Cannot "+t+" when the test module has already been instantiated. Make sure you are not using `inject` before `"+e+"`.")},ue.prototype.checkGlobalCompilationFinished=function(){this._globalCompilationChecked||null!==this._testModuleRef||d.ɵflushModuleScopingQueueAsMuchAsPossible(),this._globalCompilationChecked=!0},ue.prototype.destroyActiveFixtures=function(){var r=0;if(this._activeFixtures.forEach(function(t){try{t.destroy()}catch(e){r++,console.error("Error during cleanup of component",{component:t.componentInstance,stacktrace:e})}}),this._activeFixtures=[],0<r&&this.shouldRethrowTeardownErrors())throw Error(r+" "+(1===r?"component":"components")+" threw errors during cleanup")},ue.prototype.shouldRethrowTeardownErrors=function(){var e=this._instanceTeardownOptions,t=ue._environmentTeardownOptions;return!(!e&&!t)&&(null===(t=null!==(e=null==e?void 0:e.rethrowErrors)&&void 0!==e?e:null==t?void 0:t.rethrowErrors)||void 0===t||t)},ue.prototype.shouldTearDownTestingModule=function(){var e,t;return null!==(t=null!==(e=null===(e=this._instanceTeardownOptions)||void 0===e?void 0:e.destroyAfterEach)&&void 0!==e?e:null===(t=ue._environmentTeardownOptions)||void 0===t?void 0:t.destroyAfterEach)&&void 0!==t&&t},ue.prototype.tearDownTestingModule=function(){var e;if(null!==this._testModuleRef){var t=this.inject(ee);try{this._testModuleRef.destroy()}catch(e){if(this.shouldRethrowTeardownErrors())throw e;console.error("Error during cleanup of a testing module",{component:this._testModuleRef.instance,stacktrace:e})}finally{null!==(e=t.removeAllRootElements)&&void 0!==e&&e.call(t)}}},ue);function ue(){this.platform=null,this.ngModule=null,this._compiler=null,this._testModuleRef=null,this._activeFixtures=[],this._globalCompilationChecked=!1}function le(){return re=re||new se}function ae(){throw Error("unimplemented")}var ce,P=(c(pe,ce=d.Compiler),Object.defineProperty(pe.prototype,"injector",{get:function(){throw ae()},enumerable:!1,configurable:!0}),pe.prototype.overrideModule=function(e,t){throw ae()},pe.prototype.overrideDirective=function(e,t){throw ae()},pe.prototype.overrideComponent=function(e,t){throw ae()},pe.prototype.overridePipe=function(e,t){throw ae()},pe.prototype.loadAotSummaries=function(e){throw ae()},pe.prototype.getComponentFactory=function(e){throw ae()},pe.prototype.getComponentFromError=function(e){throw ae()},pe);function pe(){return null!==ce&&ce.apply(this,arguments)||this}P.decorators=[{type:d.Injectable}];function de(){}var he=0,fe=(ve.initTestEnvironment=function(e,t,r){var o=_e();return o.initTestEnvironment(e,t,r),o},ve.resetTestEnvironment=function(){_e().resetTestEnvironment()},ve.resetTestingModule=function(){return _e().resetTestingModule(),ve},ve.configureCompiler=function(e){return _e().configureCompiler(e),ve},ve.configureTestingModule=function(e){return _e().configureTestingModule(e),ve},ve.compileComponents=function(){return ge().compileComponents()},ve.overrideModule=function(e,t){return _e().overrideModule(e,t),ve},ve.overrideComponent=function(e,t){return _e().overrideComponent(e,t),ve},ve.overrideDirective=function(e,t){return _e().overrideDirective(e,t),ve},ve.overridePipe=function(e,t){return _e().overridePipe(e,t),ve},ve.overrideTemplate=function(e,t){return _e().overrideComponent(e,{set:{template:t,templateUrl:null}}),ve},ve.overrideTemplateUsingTestingModule=function(e,t){return _e().overrideTemplateUsingTestingModule(e,t),ve},ve.overrideProvider=function(e,t){return _e().overrideProvider(e,t),ve},ve.inject=function(e,t,r){return _e().inject(e,t,r)},ve.get=function(e,t,r){return void 0===t&&(t=d.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=d.InjectFlags.Default),_e().inject(e,t,r)},ve.createComponent=function(e){return _e().createComponent(e)},ve.shouldTearDownTestingModule=function(){return _e().shouldTearDownTestingModule()},ve.tearDownTestingModule=function(){_e().tearDownTestingModule()},ve.prototype.initTestEnvironment=function(e,t,r){if(this.platform||this.ngModule)throw new Error("Cannot set base providers because it has already been called");this.platform=t,this.ngModule=e,"function"==typeof r?(this._testEnvAotSummaries=r,ve._environmentTeardownOptions=void 0):(this._testEnvAotSummaries=(null==r?void 0:r.aotSummaries)||function(){return[]},ve._environmentTeardownOptions=null==r?void 0:r.teardown)},ve.prototype.resetTestEnvironment=function(){this.resetTestingModule(),this.platform=null,this.ngModule=null,this._testEnvAotSummaries=function(){return[]},ve._environmentTeardownOptions=void 0},ve.prototype.resetTestingModule=function(){d.ɵclearOverrides(),this._aotSummaries=[],this._templateOverrides=[],this._compiler=null,this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._isRoot=!0,this._rootProviderOverrides=[],this._moduleFactory=null,this._pendingModuleFactory=null,this._compilerOptions=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[];try{this.destroyActiveFixtures()}finally{try{this.shouldTearDownTestingModule()&&this.tearDownTestingModule()}finally{this._moduleRef=null,this._instanceTeardownOptions=void 0,this._instantiated=!1}}},ve.prototype.configureCompiler=function(e){this._assertNotInstantiated("TestBed.configureCompiler","configure the compiler"),this._compilerOptions.push(e)},ve.prototype.configureTestingModule=function(e){var t,r;this._assertNotInstantiated("TestBed.configureTestingModule","configure the test module"),e.providers&&(t=this._providers).push.apply(t,m([],v(e.providers))),e.declarations&&(t=this._declarations).push.apply(t,m([],v(e.declarations))),e.imports&&(r=this._imports).push.apply(r,m([],v(e.imports))),e.schemas&&(r=this._schemas).push.apply(r,m([],v(e.schemas))),e.aotSummaries&&this._aotSummaries.push(e.aotSummaries),this._instanceTeardownOptions=e.teardown},ve.prototype.compileComponents=function(){var t=this;if(this._moduleFactory||this._instantiated)return Promise.resolve(null);var r=this._createCompilerAndModule();return this._pendingModuleFactory=r,this._compiler.compileModuleAndAllComponentsAsync(r).then(function(e){t._pendingModuleFactory===r&&(t._moduleFactory=e.ngModuleFactory,t._pendingModuleFactory=null)})},ve.prototype._initIfNeeded=function(){var e;if(!this._instantiated){if(!this._moduleFactory)try{var t=this._createCompilerAndModule();this._moduleFactory=this._compiler.compileModuleAndAllComponentsSync(t).ngModuleFactory}catch(e){t=this._compiler.getComponentFromError(e);throw t?new Error("This test module uses the component "+d.ɵstringify(t)+' which is using a "templateUrl" or "styleUrls", but they were never compiled. Please call "TestBed.compileComponents" before your test.'):e}try{for(var r=f(this._templateOverrides),o=r.next();!o.done;o=r.next()){var n=o.value,i=n.component,s=n.templateOf,u=this._compiler.getComponentFactory(s);d.ɵoverrideComponentView(i,u)}}catch(e){l={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(l)throw l.error}}var l=new d.NgZone({enableLongStackTrace:!0,shouldCoalesceEventChangeDetection:!1}),l=[{provide:d.NgZone,useValue:l}],l=d.Injector.create({providers:l,parent:this.platform.injector,name:this._moduleFactory.moduleType.name});this._moduleRef=this._moduleFactory.create(l),this._moduleRef.injector.get(d.ApplicationInitStatus).runInitializers(),this._instantiated=!0}},ve.prototype._createCompilerAndModule=function(){var t,e,r=this,o=this._providers.concat([{provide:ye,useValue:this}]),n=m(m([],v(this._declarations)),v(this._templateOverrides.map(function(e){return e.templateOf}))),i=[],s=this._rootProviderOverrides;this._isRoot&&((u=function(){}).decorators=[{type:d.NgModule,args:[{providers:m([],v(s)),jit:!0}]}],i.push(u)),o.push({provide:d.ɵINJECTOR_SCOPE,useValue:this._isRoot?"root":null});var s=[i,this.ngModule,this._imports],u=this._schemas,i=function(){};i.decorators=[{type:d.NgModule,args:[{providers:o,declarations:n,imports:s,schemas:u,jit:!0}]}];u=this.platform.injector.get(de);this._compiler=u.createTestingCompiler(this._compilerOptions);try{for(var l=f(m([this._testEnvAotSummaries],v(this._aotSummaries))),a=l.next();!a.done;a=l.next()){var c=a.value;this._compiler.loadAotSummaries(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}return this._moduleOverrides.forEach(function(e){return r._compiler.overrideModule(e[0],e[1])}),this._componentOverrides.forEach(function(e){return r._compiler.overrideComponent(e[0],e[1])}),this._directiveOverrides.forEach(function(e){return r._compiler.overrideDirective(e[0],e[1])}),this._pipeOverrides.forEach(function(e){return r._compiler.overridePipe(e[0],e[1])}),i},ve.prototype._assertNotInstantiated=function(e,t){if(this._instantiated)throw new Error("Cannot "+t+" when the test module has already been instantiated. Make sure you are not using `inject` before `"+e+"`.")},ve.prototype.inject=function(e,t,r){if(this._initIfNeeded(),e===ye)return this;var o={},n=this._moduleRef.injector.get(e,o,r);return n===o?this._compiler.injector.get(e,t,r):n},ve.prototype.get=function(e,t,r){return void 0===t&&(t=d.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=d.InjectFlags.Default),this.inject(e,t,r)},ve.prototype.execute=function(e,t,r){var o=this;this._initIfNeeded();e=e.map(function(e){return o.inject(e)});return t.apply(r,e)},ve.prototype.overrideModule=function(e,t){this._assertNotInstantiated("overrideModule","override module metadata"),this._moduleOverrides.push([e,t])},ve.prototype.overrideComponent=function(e,t){this._assertNotInstantiated("overrideComponent","override component metadata"),this._componentOverrides.push([e,t])},ve.prototype.overrideDirective=function(e,t){this._assertNotInstantiated("overrideDirective","override directive metadata"),this._directiveOverrides.push([e,t])},ve.prototype.overridePipe=function(e,t){this._assertNotInstantiated("overridePipe","override pipe metadata"),this._pipeOverrides.push([e,t])},ve.prototype.overrideProvider=function(e,t){this._assertNotInstantiated("overrideProvider","override provider"),this.overrideProviderImpl(e,t)},ve.prototype.overrideProviderImpl=function(e,t,r){void 0===r&&(r=!1);var o=null;"string"!=typeof e&&(o=d.ɵgetInjectableDef(e))&&"root"===o.providedIn&&(t.useFactory?this._rootProviderOverrides.push({provide:e,useFactory:t.useFactory,deps:t.deps||[]}):this._rootProviderOverrides.push({provide:e,useValue:t.useValue}));var n=0,o=t.useFactory?(n|=1024,t.useFactory):(n|=256,t.useValue),t=(t.deps||[]).map(function(e){var t,r=0;return Array.isArray(e)?e.forEach(function(e){e instanceof d.Optional?r|=2:e instanceof d.SkipSelf?r|=1:t=e}):t=e,[r,t]});d.ɵoverrideProvider({token:e,flags:n,deps:t,value:o,deprecatedBehavior:r})},ve.prototype.overrideTemplateUsingTestingModule=function(e,t){this._assertNotInstantiated("overrideTemplateUsingTestingModule","override template");var r=function(){};r.decorators=[{type:d.Component,args:[{selector:"empty",template:t,jit:!0}]}],this._templateOverrides.push({component:e,templateOf:r})},ve.prototype.createComponent=function(e){var t=this;this._initIfNeeded();var r=this._compiler.getComponentFactory(e);if(!r)throw new Error("Cannot create the component "+d.ɵstringify(e)+" as it was not imported into the testing module!");var e=this.inject(ne,!1),o=this.inject(oe,!1),n=e?null:this.inject(d.NgZone,null),e=this.inject(ee),i="root"+he++;e.insertRootElement(i);e=function(){var e=r.create(d.Injector.NULL,[],"#"+i,t._moduleRef);return new u(e,n,o)},e=n?n.run(e):e();return this._activeFixtures.push(e),e},ve.prototype.destroyActiveFixtures=function(){var r=0;if(this._activeFixtures.forEach(function(t){try{t.destroy()}catch(e){r++,console.error("Error during cleanup of component",{component:t.componentInstance,stacktrace:e})}}),this._activeFixtures=[],0<r&&this.shouldRethrowTeardownErrors())throw Error(r+" "+(1===r?"component":"components")+" threw errors during cleanup")},ve.prototype.shouldRethrowTeardownErrors=function(){var e=this._instanceTeardownOptions,t=ve._environmentTeardownOptions;return!(!e&&!t)&&(null===(t=null!==(e=null==e?void 0:e.rethrowErrors)&&void 0!==e?e:null==t?void 0:t.rethrowErrors)||void 0===t||t)},ve.prototype.shouldTearDownTestingModule=function(){var e,t;return null!==(t=null!==(e=null===(e=this._instanceTeardownOptions)||void 0===e?void 0:e.destroyAfterEach)&&void 0!==e?e:null===(t=ve._environmentTeardownOptions)||void 0===t?void 0:t.destroyAfterEach)&&void 0!==t&&t},ve.prototype.tearDownTestingModule=function(){var t,r,o,n;if(null!==this._moduleRef){var e=this.inject(ee);try{this._moduleRef.destroy()}catch(e){if(null===(n=null!==(r=null===(t=this._instanceTeardownOptions)||void 0===t?void 0:t.rethrowErrors)&&void 0!==r?r:null===(o=ve._environmentTeardownOptions)||void 0===o?void 0:o.rethrowErrors)||void 0===n||n)throw e;console.error("Error during cleanup of a testing module",{component:this._moduleRef.instance,stacktrace:e})}finally{null!==(n=null==e?void 0:e.removeAllRootElements)&&void 0!==n&&n.call(e)}}},ve);function ve(){this._instantiated=!1,this._compiler=null,this._moduleRef=null,this._moduleFactory=null,this._pendingModuleFactory=null,this._compilerOptions=[],this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[],this._activeFixtures=[],this._testEnvAotSummaries=function(){return[]},this._aotSummaries=[],this._templateOverrides=[],this._isRoot=!0,this._rootProviderOverrides=[],this.platform=null,this.ngModule=null}var me,ye=d.ɵivyEnabled?se:fe,ge=d.ɵivyEnabled?le:_e;function _e(){return me=me||new fe}function Me(e,t){var r=ge();return function(){return r.execute(e,t,this)}}var we=(Te.prototype._addModule=function(){var e=this._moduleDef();e&&ge().configureTestingModule(e)},Te.prototype.inject=function(e,t){var r=this;return function(){return r._addModule(),Me(e,t).call(this)}},Te);function Te(e){this._moduleDef=e}n="undefined"==typeof window?global:window;function Oe(e){return function(){ye.shouldTearDownTestingModule()===e&&(ye.resetTestingModule(),l())}}n.beforeEach&&n.beforeEach(Oe(!1)),n.afterEach&&n.afterEach(Oe(!0));e.ComponentFixture=u,e.ComponentFixtureAutoDetect=oe,e.ComponentFixtureNoNgZone=ne,e.InjectSetupWrapper=we,e.TestBed=ye,e.TestComponentRenderer=ee,e.__core_private_testing_placeholder__="",e.async=t,e.discardPeriodicTasks=function(){if(i)return i.discardPeriodicTasks();throw new Error(s)},e.fakeAsync=function(e){if(i)return i.fakeAsync(e);throw new Error(s)},e.flush=function(e){if(i)return i.flush(e);throw new Error(s)},e.flushMicrotasks=function(){if(i)return i.flushMicrotasks();throw new Error(s)},e.getTestBed=ge,e.inject=Me,e.resetFakeAsyncZone=l,e.tick=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t={processNewMacroTasksSynchronously:!0}),i)return i.tick(e,t);throw new Error(s)},e.waitForAsync=t,e.withModule=function(t,r){return r?function(){var e=ge();return t&&e.configureTestingModule(t),r.apply(this)}:new we(function(){return t})},e.ɵMetadataOverrider=E,e.ɵTestingCompiler=P,e.ɵTestingCompilerFactory=de,e.ɵangular_packages_core_testing_testing_a=fe,e.ɵangular_packages_core_testing_testing_b=se,e.ɵangular_packages_core_testing_testing_c=le,Object.defineProperty(e,"__esModule",{value:!0})});